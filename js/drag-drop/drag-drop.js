/*! 
 * jquery.event.drag - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
;(function(e){e.fn.drag=function(l,g,k){var j=typeof l=="string"?l:"",h=e.isFunction(l)?l:e.isFunction(g)?g:null;if(j.indexOf("drag")!==0){j="drag"+j}k=(l==h?g:k)||{};return h?this.bind(j,k,h):this.trigger(j)};var b=e.event,a=b.special,d=a.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",noBubble:true,add:function(j){var h=e.data(this,d.datakey),g=j.data||{};h.related+=1;e.each(d.defaults,function(k,l){if(g[k]!==undefined){h[k]=g[k]}})},remove:function(){e.data(this,d.datakey).related-=1},setup:function(){if(e.data(this,d.datakey)){return}var g=e.extend({related:0},d.defaults);e.data(this,d.datakey,g);b.add(this,"touchstart mousedown",d.init,g);if(this.attachEvent){this.attachEvent("ondragstart",d.dontstart)}},teardown:function(){var g=e.data(this,d.datakey)||{};if(g.related){return}e.removeData(this,d.datakey);b.remove(this,"touchstart mousedown",d.init);d.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",d.dontstart)}},init:function(j){if(d.touched){return}var g=j.data,h;if(j.which!=0&&g.which>0&&j.which!=g.which){return}if(e(j.target).is(g.not)){return}if(g.handle&&!e(j.target).closest(g.handle,j.currentTarget).length){return}d.touched=j.type=="touchstart"?this:null;g.propagates=1;g.mousedown=this;g.interactions=[d.interaction(this,g)];g.target=j.target;g.pageX=j.pageX;g.pageY=j.pageY;g.dragging=null;h=d.hijack(j,"draginit",g);if(!g.propagates){return}h=d.flatten(h);if(h&&h.length){g.interactions=[];e.each(h,function(){g.interactions.push(d.interaction(this,g))})}g.propagates=g.interactions.length;if(g.drop!==false&&a.drop){a.drop.handler(j,g)}d.textselect(false);if(d.touched){b.add(d.touched,"touchmove touchend",d.handler,g)}else{b.add(document,"mousemove mouseup",d.handler,g)}if(!d.touched||g.live){return false}},interaction:function(h,g){var j=e(h)[g.relative?"position":"offset"]()||{top:0,left:0};return{drag:h,callback:new d.callback(),droppable:[],offset:j}},handler:function(h){var g=h.data;switch(h.type){case !g.dragging&&"touchmove":h.preventDefault();case !g.dragging&&"mousemove":if(Math.pow(h.pageX-g.pageX,2)+Math.pow(h.pageY-g.pageY,2)<Math.pow(g.distance,2)){break}h.target=g.target;d.hijack(h,"dragstart",g);if(g.propagates){g.dragging=true}case"touchmove":h.preventDefault();case"mousemove":if(g.dragging){d.hijack(h,"drag",g);if(g.propagates){if(g.drop!==false&&a.drop){a.drop.handler(h,g)}break}h.type="mouseup"}case"touchend":case"mouseup":default:if(d.touched){b.remove(d.touched,"touchmove touchend",d.handler)}else{b.remove(document,"mousemove mouseup",d.handler)}if(g.dragging){if(g.drop!==false&&a.drop){a.drop.handler(h,g)}d.hijack(h,"dragend",g)}d.textselect(true);if(g.click===false&&g.dragging){e.data(g.mousedown,"suppress.click",new Date().getTime()+5)}g.dragging=d.touched=false;break}},hijack:function(h,o,r,p,k){if(!r){return}var q={event:h.originalEvent,type:h.type},m=o.indexOf("drop")?"drag":"drop",t,l=p||0,j,g,s,n=!isNaN(p)?p:r.interactions.length;h.type=o;h.originalEvent=null;r.results=[];do{if(j=r.interactions[l]){if(o!=="dragend"&&j.cancelled){continue}s=d.properties(h,r,j);j.results=[];e(k||j[m]||r.droppable).each(function(v,u){s.target=u;h.isPropagationStopped=function(){return false};t=u?b.dispatch.call(u,h,s):null;if(t===false){if(m=="drag"){j.cancelled=true;r.propagates-=1}if(o=="drop"){j[m][v]=null}}else{if(o=="dropinit"){j.droppable.push(d.element(t)||u)}}if(o=="dragstart"){j.proxy=e(d.element(t)||j.drag)[0]}j.results.push(t);delete h.result;if(o!=="dropinit"){return t}});r.results[l]=d.flatten(j.results);if(o=="dropinit"){j.droppable=d.flatten(j.droppable)}if(o=="dragstart"&&!j.cancelled){s.update()}}}while(++l<n);h.type=q.type;h.originalEvent=q.event;return d.flatten(r.results)},properties:function(j,g,h){var k=h.callback;k.drag=h.drag;k.proxy=h.proxy||h.drag;k.startX=g.pageX;k.startY=g.pageY;k.deltaX=j.pageX-g.pageX;k.deltaY=j.pageY-g.pageY;k.originalX=h.offset.left;k.originalY=h.offset.top;k.offsetX=k.originalX+k.deltaX;k.offsetY=k.originalY+k.deltaY;k.drop=d.flatten((h.drop||[]).slice());k.available=d.flatten((h.droppable||[]).slice());return k},element:function(g){if(g&&(g.jquery||g.nodeType==1)){return g}},flatten:function(g){return e.map(g,function(h){return h&&h.jquery?e.makeArray(h):h&&h.length?d.flatten(h):h})},textselect:function(g){e(document)[g?"unbind":"bind"]("selectstart",d.dontstart).css("MozUserSelect",g?"":"none");document.unselectable=g?"off":"on"},dontstart:function(){return false},callback:function(){}};d.callback.prototype={update:function(){if(a.drop&&this.available.length){e.each(this.available,function(g){a.drop.locate(this,g)})}}};var f=b.dispatch;b.dispatch=function(g){if(e.data(this,"suppress."+g.type)-new Date().getTime()>0){e.removeData(this,"suppress."+g.type);return}return f.apply(this,arguments)};var c=b.fixHooks.touchstart=b.fixHooks.touchmove=b.fixHooks.touchend=b.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(h,j){if(j){var g=(j.touches&&j.touches[0])||(j.changedTouches&&j.changedTouches[0])||null;if(g){e.each(c.props,function(k,l){h[l]=g[l]})}}return h}};a.draginit=a.dragstart=a.dragend=d})(jQuery);
/*! 
 * jquery.event.drop - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
;(function(d){d.fn.drop=function(j,e,h){var g=typeof j=="string"?j:"",f=d.isFunction(j)?j:d.isFunction(e)?e:null;if(g.indexOf("drop")!==0){g="drop"+g}h=(j==f?e:h)||{};return f?this.bind(g,h,f):this.trigger(g)};d.drop=function(e){e=e||{};b.multi=e.multi===true?Infinity:e.multi===false?1:!isNaN(e.multi)?e.multi:b.multi;b.delay=e.delay||b.delay;b.tolerance=d.isFunction(e.tolerance)?e.tolerance:e.tolerance===null?null:b.tolerance;b.mode=e.mode||b.mode||"intersect"};var c=d.event,a=c.special,b=d.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:true,add:function(f){var e=d.data(this,b.datakey);e.related+=1},remove:function(){d.data(this,b.datakey).related-=1},setup:function(){if(d.data(this,b.datakey)){return}var e={related:0,active:[],anyactive:0,winner:0,location:{}};d.data(this,b.datakey,e);b.targets.push(this)},teardown:function(){var f=d.data(this,b.datakey)||{};if(f.related){return}d.removeData(this,b.datakey);var e=this;b.targets=d.grep(b.targets,function(g){return(g!==e)})},handler:function(g,e){var f,h;if(!e){return}switch(g.type){case"mousedown":case"touchstart":h=d(b.targets);if(typeof e.drop=="string"){h=h.filter(e.drop)}h.each(function(){var j=d.data(this,b.datakey);j.active=[];j.anyactive=0;j.winner=0});e.droppable=h;a.drag.hijack(g,"dropinit",e);break;case"mousemove":case"touchmove":b.event=g;if(!b.timer){b.tolerate(e)}break;case"mouseup":case"touchend":b.timer=clearTimeout(b.timer);if(e.propagates){a.drag.hijack(g,"drop",e);a.drag.hijack(g,"dropend",e)}break}},locate:function(l,h){var m=d.data(l,b.datakey),g=d(l),j=g.offset()||{},e=g.outerHeight(),k=g.outerWidth(),f={elem:l,width:k,height:e,top:j.top,left:j.left,right:j.left+k,bottom:j.top+e};if(m){m.location=f;m.index=h;m.elem=l}return f},contains:function(e,f){return((f[0]||f.left)>=e.left&&(f[0]||f.right)<=e.right&&(f[1]||f.top)>=e.top&&(f[1]||f.bottom)<=e.bottom)},modes:{intersect:function(f,e,g){return this.contains(g,[f.pageX,f.pageY])?1000000000:this.modes.overlap.apply(this,arguments)},overlap:function(f,e,g){return Math.max(0,Math.min(g.bottom,e.bottom)-Math.max(g.top,e.top))*Math.max(0,Math.min(g.right,e.right)-Math.max(g.left,e.left))},fit:function(f,e,g){return this.contains(g,e)?1:0},middle:function(f,e,g){return this.contains(g,[e.left+e.width*0.5,e.top+e.height*0.5])?1:0}},sort:function(f,e){return(e.winner-f.winner)||(f.index-e.index)},tolerate:function(q){var k,e,n,j,l,m,g,p=0,f,h=q.interactions.length,r=[b.event.pageX,b.event.pageY],o=b.tolerance||b.modes[b.mode];do{if(f=q.interactions[p]){if(!f){return}f.drop=[];l=[];m=f.droppable.length;if(o){n=b.locate(f.proxy)}k=0;do{if(g=f.droppable[k]){j=d.data(g,b.datakey);e=j.location;if(!e){continue}j.winner=o?o.call(b,b.event,n,e):b.contains(e,r)?1:0;l.push(j)}}while(++k<m);l.sort(b.sort);k=0;do{if(j=l[k]){if(j.winner&&f.drop.length<b.multi){if(!j.active[p]&&!j.anyactive){if(a.drag.hijack(b.event,"dropstart",q,p,j.elem)[0]!==false){j.active[p]=1;j.anyactive+=1}else{j.winner=0}}if(j.winner){f.drop.push(j.elem)}}else{if(j.active[p]&&j.anyactive==1){a.drag.hijack(b.event,"dropend",q,p,j.elem);j.active[p]=0;j.anyactive-=1}}}}while(++k<m)}}while(++p<h);if(b.last&&r[0]==b.last.pageX&&r[1]==b.last.pageY){delete b.timer}else{b.timer=setTimeout(function(){b.tolerate(q)},b.delay)}b.last=b.event}};a.dropinit=a.dropstart=a.dropend=b})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e},easeOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return g*Math.pow(2,-10*h)*Math.sin((h*l-j)*(2*Math.PI)/k)+m+e},easeInOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l/2)==2){return e+m}if(!k){k=l*(0.3*1.5)}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k)*0.5+m+e},easeInBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}return j*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,j,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return j/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return j/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});(function(b){var a={};var c={mode:"horizontal",slideSelector:"",infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:false,captions:false,ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,video:false,useCSS:true,preloadImages:"visible",touchEnabled:true,swipeThreshold:50,oneToOneTouch:true,preventDefaultSwipeX:true,preventDefaultSwipeY:false,pager:true,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:true,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:false,startText:"Start",stopText:"Stop",autoControlsCombine:false,autoControlsSelector:null,auto:false,pause:4000,autoStart:true,autoDirection:"next",autoHover:false,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};b.fn.bxSlider=function(r){if(this.length==0){return}if(this.length>1){this.each(function(){b(this).bxSlider(r)});return this}var h={};var G=this;a.el=this;var I=b(window).width();var L=b(window).height();var B=function(){h.settings=b.extend({},c,r);h.settings.slideWidth=parseInt(h.settings.slideWidth);h.children=G.children(h.settings.slideSelector);if(h.children.length<h.settings.minSlides){h.settings.minSlides=h.children.length}if(h.children.length<h.settings.maxSlides){h.settings.maxSlides=h.children.length}if(h.settings.randomStart){h.settings.startSlide=Math.floor(Math.random()*h.children.length)}h.active={index:h.settings.startSlide};h.carousel=h.settings.minSlides>1||h.settings.maxSlides>1;if(h.carousel){h.settings.preloadImages="all"}h.minThreshold=(h.settings.minSlides*h.settings.slideWidth)+((h.settings.minSlides-1)*h.settings.slideMargin);h.maxThreshold=(h.settings.maxSlides*h.settings.slideWidth)+((h.settings.maxSlides-1)*h.settings.slideMargin);h.working=false;h.controls={};h.interval=null;h.animProp=h.settings.mode=="vertical"?"top":"left";h.usingCSS=h.settings.useCSS&&h.settings.mode!="fade"&&(function(){var S=document.createElement("div");var R=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var Q in R){if(S.style[R[Q]]!==undefined){h.cssPrefix=R[Q].replace("Perspective","").toLowerCase();h.animProp="-"+h.cssPrefix+"-transform";return true}}return false}());if(h.settings.mode=="vertical"){h.settings.maxSlides=h.settings.minSlides}l()};var l=function(){G.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>');h.viewport=G.parent();h.loader=b('<div class="bx-loading" />');h.viewport.prepend(h.loader);G.css({width:h.settings.mode=="horizontal"?h.children.length*215+"%":"auto",position:"relative"});if(h.usingCSS&&h.settings.easing){G.css("-"+h.cssPrefix+"-transition-timing-function",h.settings.easing)}else{if(!h.settings.easing){h.settings.easing="swing"}}var R=z();h.viewport.css({width:"100%",overflow:"hidden",position:"relative"});h.viewport.parent().css({maxWidth:K()});h.children.css({"float":h.settings.mode=="horizontal"?"left":"none",listStyle:"none",position:"relative"});h.children.width(C());if(h.settings.mode=="horizontal"&&h.settings.slideMargin>0){h.children.css("marginRight",h.settings.slideMargin)}if(h.settings.mode=="vertical"&&h.settings.slideMargin>0){h.children.css("marginBottom",h.settings.slideMargin)}if(h.settings.mode=="fade"){h.children.css({position:"absolute",zIndex:0,display:"none"});h.children.eq(h.settings.startSlide).css({zIndex:50,display:"block"})}h.controls.el=b('<div class="bx-controls" />');if(h.settings.captions){y()}if(h.settings.infiniteLoop&&h.settings.mode!="fade"&&!h.settings.ticker){var U=h.settings.mode=="vertical"?h.settings.minSlides:h.settings.maxSlides;var T=h.children.slice(0,U).clone().addClass("bx-clone");var Q=h.children.slice(-U).clone().addClass("bx-clone");G.append(T).prepend(Q)}h.active.last=h.settings.startSlide==u()-1;if(h.settings.video){G.fitVids()}var S=h.children.eq(h.settings.startSlide);if(h.settings.preloadImages=="all"){S=G.children()}if(!h.settings.ticker){if(h.settings.pager){N()}if(h.settings.controls){j()}if(h.settings.auto&&h.settings.autoControls){J()}if(h.settings.controls||h.settings.autoControls||h.settings.pager){h.viewport.after(h.controls.el)}}S.imagesLoaded(s)};var s=function(){h.loader.remove();g();if(h.settings.mode=="vertical"){h.settings.adaptiveHeight=true}h.viewport.height(n());G.redrawSlider();h.settings.onSliderLoad(h.active.index);h.initialized=true;b(window).bind("resize",m);if(h.settings.auto&&h.settings.autoStart){d()}if(h.settings.ticker){D()}if(h.settings.pager){P(h.settings.startSlide)}if(h.settings.controls){k()}if(h.settings.touchEnabled&&!h.settings.ticker){e()}};var n=function(){var Q=0;var S=b();if(h.settings.mode!="vertical"&&!h.settings.adaptiveHeight){S=h.children}else{if(!h.carousel){S=h.children.eq(h.active.index)}else{var R=h.settings.moveSlides==1?h.active.index:h.active.index*p();S=h.children.eq(R);for(i=1;i<=h.settings.maxSlides-1;i++){if(R+i>=h.children.length){S=S.add(h.children.eq(i-1))}else{S=S.add(h.children.eq(R+i))}}}}if(h.settings.mode=="vertical"){S.each(function(T){Q+=b(this).outerHeight()});if(h.settings.slideMargin>0){Q+=h.settings.slideMargin*(h.settings.minSlides-1)}}else{Q=Math.max.apply(Math,S.map(function(){return b(this).outerHeight(true)}).get())}return Q};var K=function(){var Q="100%";if(h.settings.slideWidth>0){if(h.settings.mode=="horizontal"){Q=(h.settings.maxSlides*h.settings.slideWidth)+((h.settings.maxSlides-1)*h.settings.slideMargin)}else{Q=h.settings.slideWidth}}return Q};var C=function(){var R=h.settings.slideWidth;var Q=h.viewport.width();if(h.settings.slideWidth==0||(h.settings.slideWidth>Q&&!h.carousel)||h.settings.mode=="vertical"){R=Q}else{if(h.settings.maxSlides>1&&h.settings.mode=="horizontal"){if(Q>h.maxThreshold){}else{if(Q<h.minThreshold){R=(Q-(h.settings.slideMargin*(h.settings.minSlides-1)))/h.settings.minSlides}}}}return R};var z=function(){var R=1;if(h.settings.mode=="horizontal"&&h.settings.slideWidth>0){if(h.viewport.width()<h.minThreshold){R=h.settings.minSlides}else{if(h.viewport.width()>h.maxThreshold){R=h.settings.maxSlides}else{var Q=h.children.first().width();R=Math.floor(h.viewport.width()/Q)}}}else{if(h.settings.mode=="vertical"){R=h.settings.minSlides}}return R};var u=function(){var R=0;if(h.settings.moveSlides>0){if(h.settings.infiniteLoop){R=h.children.length/p()}else{var S=0;var Q=0;while(S<h.children.length){++R;S=Q+z();Q+=h.settings.moveSlides<=z()?h.settings.moveSlides:z()}}}else{R=Math.ceil(h.children.length/z())}return R};var p=function(){if(h.settings.moveSlides>0&&h.settings.moveSlides<=z()){return h.settings.moveSlides}return z()};var g=function(){if(h.children.length>h.settings.maxSlides&&h.active.last&&!h.settings.infiniteLoop){if(h.settings.mode=="horizontal"){var S=h.children.last();var Q=S.position();A(-(Q.left-(h.viewport.width()-S.width())),"reset",0)}else{if(h.settings.mode=="vertical"){var R=h.children.length-h.settings.minSlides;var Q=h.children.eq(R).position();A(-Q.top,"reset",0)}}}else{var Q=h.children.eq(h.active.index*p()).position();if(h.active.index==u()-1){h.active.last=true}if(Q!=undefined){if(h.settings.mode=="horizontal"){A(-Q.left,"reset",0)}else{if(h.settings.mode=="vertical"){A(-Q.top,"reset",0)}}}}};var A=function(S,R,T,V){if(h.usingCSS){var U=h.settings.mode=="vertical"?"translate3d(0, "+S+"px, 0)":"translate3d("+S+"px, 0, 0)";G.css("-"+h.cssPrefix+"-transition-duration",T/1000+"s");if(R=="slide"){G.css(h.animProp,U);G.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){G.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");o()})}else{if(R=="reset"){G.css(h.animProp,U)}else{if(R=="ticker"){G.css("-"+h.cssPrefix+"-transition-timing-function","linear");G.css(h.animProp,U);G.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){G.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");A(V.resetValue,"reset",0);t()})}}}}else{var Q={};Q[h.animProp]=S;if(R=="slide"){G.animate(Q,T,h.settings.easing,function(){o()})}else{if(R=="reset"){G.css(h.animProp,S)}else{if(R=="ticker"){G.animate(Q,speed,"linear",function(){A(V.resetValue,"reset",0);t()})}}}}};var q=function(){var S="";pagerQty=u();for(var R=0;R<pagerQty;R++){var Q="";if(h.settings.buildPager&&b.isFunction(h.settings.buildPager)){Q=h.settings.buildPager(R);h.pagerEl.addClass("bx-custom-pager")}else{Q=R+1;h.pagerEl.addClass("bx-default-pager")}S+='<div class="bx-pager-item"><a href="" data-slide-index="'+R+'" class="bx-pager-link">'+Q+"</a></div>"}h.pagerEl.html(S)};var N=function(){if(!h.settings.pagerCustom){h.pagerEl=b('<div class="bx-pager" />');if(h.settings.pagerSelector){b(h.settings.pagerSelector).html(h.pagerEl)}else{h.controls.el.addClass("bx-has-pager").append(h.pagerEl)}q()}else{h.pagerEl=b(h.settings.pagerCustom)}h.pagerEl.delegate("a","click",w)};var j=function(){h.controls.next=b('<a class="bx-next" href="">'+h.settings.nextText+"</a>");h.controls.prev=b('<a class="bx-prev" href="">'+h.settings.prevText+"</a>");h.controls.next.bind("click",f);h.controls.prev.bind("click",M);if(h.settings.nextSelector){b(h.settings.nextSelector).append(h.controls.next)}if(h.settings.prevSelector){b(h.settings.prevSelector).append(h.controls.prev)}if(!h.settings.nextSelector&&!h.settings.prevSelector){h.controls.directionEl=b('<div class="bx-controls-direction" />');h.controls.directionEl.append(h.controls.prev).append(h.controls.next);h.controls.el.addClass("bx-has-controls-direction").append(h.controls.directionEl)}};var J=function(){h.controls.start=b('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+h.settings.startText+"</a></div>");h.controls.stop=b('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+h.settings.stopText+"</a></div>");h.controls.autoEl=b('<div class="bx-controls-auto" />');h.controls.autoEl.delegate(".bx-start","click",v);h.controls.autoEl.delegate(".bx-stop","click",O);if(h.settings.autoControlsCombine){h.controls.autoEl.append(h.controls.start)}else{h.controls.autoEl.append(h.controls.start).append(h.controls.stop)}if(h.settings.autoControlsSelector){b(h.settings.autoControlsSelector).html(h.controls.autoEl)}else{h.controls.el.addClass("bx-has-controls-auto").append(h.controls.autoEl)}F(h.settings.autoStart?"stop":"start")};var y=function(){h.children.each(function(Q){var R=b(this).find("img:first").attr("title");if(R!=undefined){b(this).append('<div class="bx-caption"><span>'+R+"</span></div>")}})};var f=function(Q){if(h.settings.auto){G.stopAuto()}G.goToNextSlide();Q.preventDefault()};var M=function(Q){if(h.settings.auto){G.stopAuto()}G.goToPrevSlide();Q.preventDefault()};var v=function(Q){G.startAuto();Q.preventDefault()};var O=function(Q){G.stopAuto();Q.preventDefault()};var w=function(S){if(h.settings.auto){G.stopAuto()}var R=b(S.currentTarget);var Q=parseInt(R.attr("data-slide-index"));if(Q!=h.active.index){G.goToSlide(Q)}S.preventDefault()};var P=function(Q){if(h.settings.pagerType=="short"){h.pagerEl.html((Q+1)+h.settings.pagerShortSeparator+h.children.length);return}h.pagerEl.find("a").removeClass("active");h.pagerEl.each(function(R,S){b(S).find("a").eq(Q).addClass("active")})};var o=function(){if(h.settings.infiniteLoop){var Q="";if(h.active.index==0){Q=h.children.eq(0).position()}else{if(h.active.index==u()-1&&h.carousel){Q=h.children.eq((u()-1)*p()).position()}else{if(h.active.index==h.children.length-1){Q=h.children.eq(h.children.length-1).position()}}}if(h.settings.mode=="horizontal"){A(-Q.left,"reset",0)}else{if(h.settings.mode=="vertical"){A(-Q.top,"reset",0)}}}h.working=false;h.settings.onSlideAfter(h.children.eq(h.active.index),h.oldIndex,h.active.index)};var F=function(Q){if(h.settings.autoControlsCombine){h.controls.autoEl.html(h.controls[Q])}else{h.controls.autoEl.find("a").removeClass("active");h.controls.autoEl.find("a:not(.bx-"+Q+")").addClass("active")}};var k=function(){if(!h.settings.infiniteLoop&&h.settings.hideControlOnEnd){if(h.active.index==0){h.controls.prev.addClass("disabled");h.controls.next.removeClass("disabled")}else{if(h.active.index==u()-1){h.controls.next.addClass("disabled");h.controls.prev.removeClass("disabled")}else{h.controls.prev.removeClass("disabled");h.controls.next.removeClass("disabled")}}}else{if(u()==1){h.controls.prev.addClass("disabled");h.controls.next.addClass("disabled")}}};var d=function(){if(h.settings.autoDelay>0){var Q=setTimeout(G.startAuto,h.settings.autoDelay)}else{G.startAuto()}if(h.settings.autoHover){G.hover(function(){if(h.interval){G.stopAuto(true);h.autoPaused=true}},function(){if(h.autoPaused){G.startAuto(true);h.autoPaused=null}})}};var D=function(){var R=0;if(h.settings.autoDirection=="next"){G.append(h.children.clone().addClass("bx-clone"))}else{G.prepend(h.children.clone().addClass("bx-clone"));var Q=h.children.first().position();R=h.settings.mode=="horizontal"?-Q.left:-Q.top}A(R,"reset",0);h.settings.pager=false;h.settings.controls=false;h.settings.autoControls=false;if(h.settings.tickerHover&&!h.usingCSS){h.viewport.hover(function(){G.stop()},function(){var V=0;h.children.each(function(W){V+=h.settings.mode=="horizontal"?b(this).outerWidth(true):b(this).outerHeight(true)});var S=h.settings.speed/V;var T=h.settings.mode=="horizontal"?"left":"top";var U=S*(V-(Math.abs(parseInt(G.css(T)))));t(U)})}t()};var t=function(V){speed=V?V:h.settings.speed;var Q={left:0,top:0};var T={left:0,top:0};if(h.settings.autoDirection=="next"){Q=G.find(".bx-clone").first().position()}else{T=h.children.first().position()}var S=h.settings.mode=="horizontal"?-Q.left:-Q.top;var R=h.settings.mode=="horizontal"?-T.left:-T.top;var U={resetValue:R};A(S,"ticker",speed,U)};var e=function(){h.touch={start:{x:0,y:0},end:{x:0,y:0}};h.viewport.bind("touchstart",E)};var E=function(Q){if(h.working){Q.preventDefault()}else{h.touch.originalPos=G.position();var R=Q.originalEvent;h.touch.start.x=R.changedTouches[0].pageX;h.touch.start.y=R.changedTouches[0].pageY;h.viewport.bind("touchmove",H);h.viewport.bind("touchend",x)}};var H=function(R){var V=R.originalEvent;var S=Math.abs(V.changedTouches[0].pageX-h.touch.start.x);var U=Math.abs(V.changedTouches[0].pageY-h.touch.start.y);if((S*3)>U&&h.settings.preventDefaultSwipeX){R.preventDefault()}else{if((U*3)>S&&h.settings.preventDefaultSwipeY){R.preventDefault()}}if(h.settings.mode!="fade"&&h.settings.oneToOneTouch){var Q=0;if(h.settings.mode=="horizontal"){var T=V.changedTouches[0].pageX-h.touch.start.x;Q=h.touch.originalPos.left+T}else{var T=V.changedTouches[0].pageY-h.touch.start.y;Q=h.touch.originalPos.top+T}A(Q,"reset",0)}};var x=function(R){h.viewport.unbind("touchmove",H);var T=R.originalEvent;var Q=0;h.touch.end.x=T.changedTouches[0].pageX;h.touch.end.y=T.changedTouches[0].pageY;if(h.settings.mode=="fade"){var S=Math.abs(h.touch.start.x-h.touch.end.x);if(S>=h.settings.swipeThreshold){h.touch.start.x>h.touch.end.x?G.goToNextSlide():G.goToPrevSlide();G.stopAuto()}}else{var S=0;if(h.settings.mode=="horizontal"){S=h.touch.end.x-h.touch.start.x;Q=h.touch.originalPos.left}else{S=h.touch.end.y-h.touch.start.y;Q=h.touch.originalPos.top}if(!h.settings.infiniteLoop&&((h.active.index==0&&S>0)||(h.active.last&&S<0))){A(Q,"reset",200)}else{if(Math.abs(S)>=h.settings.swipeThreshold){S<0?G.goToNextSlide():G.goToPrevSlide();G.stopAuto()}else{A(Q,"reset",200)}}}h.viewport.unbind("touchend",x)};var m=function(R){var Q=b(window).width();var S=b(window).height();if(I!=Q||L!=S){I=Q;L=S;G.redrawSlider()}};G.goToSlide=function(U,W){if(h.working||h.active.index==U){return}h.working=true;h.oldIndex=h.active.index;if(U<0){h.active.index=u()-1}else{if(U>=u()){h.active.index=0}else{h.active.index=U}}h.settings.onSlideBefore(h.children.eq(h.active.index),h.oldIndex,h.active.index);if(W=="next"){h.settings.onSlideNext(h.children.eq(h.active.index),h.oldIndex,h.active.index)}else{if(W=="prev"){h.settings.onSlidePrev(h.children.eq(h.active.index),h.oldIndex,h.active.index)}}h.active.last=h.active.index>=u()-1;if(h.settings.pager){P(h.active.index)}if(h.settings.controls){k()}if(h.settings.mode=="fade"){if(h.settings.adaptiveHeight&&h.viewport.height()!=n()){h.viewport.animate({height:n()},h.settings.adaptiveHeightSpeed)}h.children.filter(":visible").fadeOut(h.settings.speed).css({zIndex:0});h.children.eq(h.active.index).css("zIndex",51).fadeIn(h.settings.speed,function(){b(this).css("zIndex",50);o()})}else{if(h.settings.adaptiveHeight&&h.viewport.height()!=n()){h.viewport.animate({height:n()},h.settings.adaptiveHeightSpeed)}var V=0;var T={left:0,top:0};if(!h.settings.infiniteLoop&&h.carousel&&h.active.last){if(h.settings.mode=="horizontal"){var Q=h.children.eq(h.children.length-1);T=Q.position();V=h.viewport.width()-Q.width()}else{var S=h.children.length-h.settings.minSlides;T=h.children.eq(S).position()}}else{if(h.carousel&&h.active.last&&W=="prev"){var Y=h.settings.moveSlides==1?h.settings.maxSlides-p():((u()-1)*p())-(h.children.length-h.settings.maxSlides);var Q=G.children(".bx-clone").eq(Y);T=Q.position()}else{if(W=="next"&&h.active.index==0){T=G.find(".bx-clone").eq(h.settings.maxSlides).position();h.active.last=false}else{if(U>=0){var R=U*p();T=h.children.eq(R).position()}}}}var X=h.settings.mode=="horizontal"?-(T.left-V):-T.top;A(X,"slide",h.settings.speed)}};G.goToNextSlide=function(){if(!h.settings.infiniteLoop&&h.active.last){return}var Q=parseInt(h.active.index)+1;G.goToSlide(Q,"next")};G.goToPrevSlide=function(){if(!h.settings.infiniteLoop&&h.active.index==0){return}var Q=parseInt(h.active.index)-1;G.goToSlide(Q,"prev")};G.startAuto=function(Q){if(h.interval){return}h.interval=setInterval(function(){h.settings.autoDirection=="next"?G.goToNextSlide():G.goToPrevSlide()},h.settings.pause);if(h.settings.autoControls&&Q!=true){F("stop")}};G.stopAuto=function(Q){if(!h.interval){return}clearInterval(h.interval);h.interval=null;if(h.settings.autoControls&&Q!=true){F("start")}};G.getCurrentSlide=function(){return h.active.index};G.getSlideCount=function(){return h.children.length};G.redrawSlider=function(){h.children.add(G.find(".bx-clone")).width(C());h.viewport.css("height",n());if(!h.settings.ticker){g()}if(h.active.last){h.active.index=u()-1}if(h.active.index>=u()){h.active.last=true}if(h.settings.pager&&!h.settings.pagerCustom){q();P(h.active.index)}};G.destroySlider=function(){if(!h.initialized){return}h.initialized=false;b(".bx-clone",this).remove();h.children.removeAttr("style");this.removeAttr("style").unwrap().unwrap();if(h.controls.el){h.controls.el.remove()}if(h.controls.next){h.controls.next.remove()}if(h.controls.prev){h.controls.prev.remove()}if(h.pagerEl){h.pagerEl.remove()}b(".bx-caption",this).remove();if(h.controls.autoEl){h.controls.autoEl.remove()}clearInterval(h.interval);b(window).unbind("resize",m)};G.reloadSlider=function(Q){if(Q!=undefined){r=Q}G.destroySlider();B()};B();return this}})(jQuery);
/*!
 * jQuery imagesLoaded plugin v2.1.0
 * http://github.com/desandro/imagesloaded
 *
 * MIT License. by Paul Irish et al.
 */
(function(d,b){var a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";d.fn.imagesLoaded=function(t){function l(){var e=d(q),f=d(r);v&&(r.length?v.reject(u,e,f):v.resolve(u));d.isFunction(t)&&t.call(s,u,e,f)}function p(e,f){e.src===a||-1!==d.inArray(e,n)||(n.push(e),f?r.push(e):q.push(e),d.data(e,"imagesLoaded",{isBroken:f,src:e.src}),c&&v.notifyWith(d(e),[f,u,d(q),d(r)]),u.length===n.length&&(setTimeout(l),u.unbind(".imagesLoaded")))}var s=this,v=d.isFunction(d.Deferred)?d.Deferred():0,c=d.isFunction(v.notify),u=s.find("img").add(s.filter("img")),n=[],q=[],r=[];d.isPlainObject(t)&&d.each(t,function(e,f){if("callback"===e){t=f}else{if(v){v[e](f)}}});u.length?u.bind("load.imagesLoaded error.imagesLoaded",function(e){p(e.target,"error"===e.type)}).each(function(f,g){var j=g.src,h=d.data(g,"imagesLoaded");if(h&&h.src===j){p(g,h.isBroken)}else{if(g.complete&&g.naturalWidth!==b){p(g,0===g.naturalWidth||0===g.naturalHeight)}else{if(g.readyState||g.complete){g.src=a,g.src=j}}}}):l();return v?v.promise(s):s}})(jQuery);(function(b){var c,d,a;b.extend({roundaboutShapes:{def:"lazySusan",lazySusan:function(g,e,f){return{x:Math.sin(g+e),y:(Math.sin(g+3*Math.PI/2+e)/8)*f,z:(Math.cos(g+e)+1)/2,scale:(Math.sin(g+Math.PI/2+e)/2)+0.5}}}});c={bearing:0,tilt:0,minZ:100,maxZ:280,minOpacity:0.4,maxOpacity:1,minScale:0.4,maxScale:1,duration:600,btnNext:null,btnNextCallback:function(){},btnPrev:null,btnPrevCallback:function(){},btnToggleAutoplay:null,btnStartAutoplay:null,btnStopAutoplay:null,easing:"swing",clickToFocus:true,clickToFocusCallback:function(){},focusBearing:0,shape:"lazySusan",debug:false,childSelector:"li",startingChild:null,reflect:false,floatComparisonThreshold:0.001,autoplay:false,autoplayDuration:1000,autoplayPauseOnHover:false,autoplayCallback:function(){},autoplayInitialDelay:0,enableDrag:false,dropDuration:600,dropEasing:"swing",dropAnimateTo:"nearest",dropCallback:function(){},dragAxis:"x",dragFactor:4,triggerFocusEvents:true,triggerBlurEvents:true,responsive:false};d={autoplayInterval:null,autoplayIsRunning:false,autoplayStartTimeout:null,animating:false,childInFocus:-1,touchMoveStartPosition:null,stopAnimation:false,lastAnimationStep:false};a={init:function(f,j,h){var g,e=(new Date()).getTime();f=(typeof f==="object")?f:{};j=(b.isFunction(j))?j:function(){};j=(b.isFunction(f))?f:j;g=b.extend({},c,f,d);return this.each(function(){var l=b(this),k=l.children(g.childSelector).length,o=360/k,n=(g.startingChild&&g.startingChild>(k-1))?(k-1):g.startingChild,m=(g.startingChild===null)?g.bearing:360-(n*o),p=(l.css("position")!=="static")?l.css("position"):"relative";l.css({padding:0,position:p}).addClass("roundabout-holder").data("roundabout",b.extend({},g,{startingChild:n,bearing:m,oppositeOfFocusBearing:a.normalize.apply(null,[g.focusBearing-180]),dragBearing:m,period:o}));if(h){l.unbind(".roundabout").children(g.childSelector).unbind(".roundabout")}else{if(g.responsive){b(window).bind("resize",function(){a.stopAutoplay.apply(l);a.relayoutChildren.apply(l)})}}if(g.clickToFocus){l.children(g.childSelector).each(function(q){b(this).bind("click.roundabout",function(){var r=a.getPlacement.apply(l,[q]);if(!a.isInFocus.apply(l,[r])){a.stopAnimation.apply(b(this));if(!l.data("roundabout").animating){a.animateBearingToFocus.apply(l,[r,l.data("roundabout").clickToFocusCallback])}return false}})})}if(g.btnNext){b(g.btnNext).bind("click.roundabout",function(){if(!l.data("roundabout").animating){a.animateToNextChild.apply(l,[l.data("roundabout").btnNextCallback])}return false})}if(g.btnPrev){b(g.btnPrev).bind("click.roundabout",function(){a.animateToPreviousChild.apply(l,[l.data("roundabout").btnPrevCallback]);return false})}if(g.btnToggleAutoplay){b(g.btnToggleAutoplay).bind("click.roundabout",function(){a.toggleAutoplay.apply(l);return false})}if(g.btnStartAutoplay){b(g.btnStartAutoplay).bind("click.roundabout",function(){a.startAutoplay.apply(l);return false})}if(g.btnStopAutoplay){b(g.btnStopAutoplay).bind("click.roundabout",function(){a.stopAutoplay.apply(l);return false})}if(g.autoplayPauseOnHover){l.bind("mouseenter.roundabout.autoplay",function(){a.stopAutoplay.apply(l,[true])}).bind("mouseleave.roundabout.autoplay",function(){a.startAutoplay.apply(l)})}if(g.enableDrag){if(!b.isFunction(l.drag)){if(g.debug){alert("You do not have the drag plugin loaded.")}}else{if(!b.isFunction(l.drop)){if(g.debug){alert("You do not have the drop plugin loaded.")}}else{l.drag(function(s,q){var r=l.data("roundabout"),t=(r.dragAxis.toLowerCase()==="x")?"deltaX":"deltaY";a.stopAnimation.apply(l);a.setBearing.apply(l,[r.dragBearing+q[t]/r.dragFactor])}).drop(function(r){var q=l.data("roundabout"),s=a.getAnimateToMethod(q.dropAnimateTo);a.allowAnimation.apply(l);a[s].apply(l,[q.dropDuration,q.dropEasing,q.dropCallback]);q.dragBearing=q.period*a.getNearestChild.apply(l)})}}l.each(function(){var q=b(this).get(0),s=b(this).data("roundabout"),r=(s.dragAxis.toLowerCase()==="x")?"pageX":"pageY",t=a.getAnimateToMethod(s.dropAnimateTo);if(q.addEventListener){q.addEventListener("touchstart",function(u){s.touchMoveStartPosition=u.touches[0][r]},false);q.addEventListener("touchmove",function(u){var v=(u.touches[0][r]-s.touchMoveStartPosition)/s.dragFactor;u.preventDefault();a.stopAnimation.apply(b(this));a.setBearing.apply(b(this),[s.dragBearing+v])},false);q.addEventListener("touchend",function(u){u.preventDefault();a.allowAnimation.apply(b(this));t=a.getAnimateToMethod(s.dropAnimateTo);a[t].apply(b(this),[s.dropDuration,s.dropEasing,s.dropCallback]);s.dragBearing=s.period*a.getNearestChild.apply(b(this))},false)}})}a.initChildren.apply(l,[j,h])})},initChildren:function(h,f){var e=b(this),g=e.data("roundabout");h=h||function(){};e.children(g.childSelector).each(function(m){var k,j,l,n=a.getPlacement.apply(e,[m]);if(f&&b(this).data("roundabout")){k=b(this).data("roundabout").startWidth;j=b(this).data("roundabout").startHeight;l=b(this).data("roundabout").startFontSize}b(this).addClass("roundabout-moveable-item").css("position","absolute");b(this).data("roundabout",{startWidth:k||b(this).width(),startHeight:j||b(this).height(),startFontSize:l||parseInt(b(this).css("font-size"),10),degrees:n,backDegrees:a.normalize.apply(null,[n-180]),childNumber:m,currentScale:1,parent:e})});a.updateChildren.apply(e);if(g.autoplay){g.autoplayStartTimeout=setTimeout(function(){a.startAutoplay.apply(e)},g.autoplayInitialDelay)}e.trigger("ready");h.apply(e);return e},updateChildren:function(){return this.each(function(){var e=b(this),f=e.data("roundabout"),h=-1,g={bearing:f.bearing,tilt:f.tilt,stage:{width:Math.floor(b(this).width()*0.9),height:Math.floor(b(this).height()*0.9)},animating:f.animating,inFocus:f.childInFocus,focusBearingRadian:a.degToRad.apply(null,[f.focusBearing]),shape:b.roundaboutShapes[f.shape]||b.roundaboutShapes[b.roundaboutShapes.def]};g.midStage={width:g.stage.width/2,height:g.stage.height/2};g.nudge={width:g.midStage.width+(g.stage.width*0.05),height:g.midStage.height+(g.stage.height*0.05)};g.zValues={min:f.minZ,max:f.maxZ,diff:f.maxZ-f.minZ};g.opacity={min:f.minOpacity,max:f.maxOpacity,diff:f.maxOpacity-f.minOpacity};g.scale={min:f.minScale,max:f.maxScale,diff:f.maxScale-f.minScale};e.children(f.childSelector).each(function(j){if(a.updateChild.apply(e,[b(this),g,j,function(){b(this).trigger("ready")}])&&(!g.animating||f.lastAnimationStep)){h=j;b(this).addClass("roundabout-in-focus")}else{b(this).removeClass("roundabout-in-focus")}});if(h!==g.inFocus){if(f.triggerBlurEvents){e.children(f.childSelector).eq(g.inFocus).trigger("blur")}f.childInFocus=h;if(f.triggerFocusEvents&&h!==-1){e.children(f.childSelector).eq(h).trigger("focus")}}e.trigger("childrenUpdated")})},updateChild:function(h,g,e,n){var m,o=this,f=b(h),k=f.data("roundabout"),j=[],l=a.degToRad.apply(null,[(360-k.degrees)+g.bearing]);n=n||function(){};l=a.normalizeRad.apply(null,[l]);m=g.shape(l,g.focusBearingRadian,g.tilt);m.scale=(m.scale>1)?1:m.scale;m.adjustedScale=(g.scale.min+(g.scale.diff*m.scale)).toFixed(4);m.width=(m.adjustedScale*k.startWidth).toFixed(4);m.height=(m.adjustedScale*k.startHeight).toFixed(4);f.css({left:((m.x*g.midStage.width+g.nudge.width)-m.width/2).toFixed(0)+"px",top:((m.y*g.midStage.height+g.nudge.height)-m.height/2).toFixed(0)+"px",width:m.width+"px",height:m.height+"px",opacity:(g.opacity.min+(g.opacity.diff*m.scale)).toFixed(2),zIndex:Math.round(g.zValues.min+(g.zValues.diff*m.z)),fontSize:(m.adjustedScale*k.startFontSize).toFixed(1)+"px"});k.currentScale=m.adjustedScale;if(o.data("roundabout").debug){j.push('<div style="font-weight: normal; font-size: 10px; padding: 2px; width: '+f.css("width")+'; background-color: #ffc;">');j.push('<strong style="font-size: 12px; white-space: nowrap;">Child '+e+"</strong><br />");j.push("<strong>left:</strong> "+f.css("left")+"<br />");j.push("<strong>top:</strong> "+f.css("top")+"<br />");j.push("<strong>width:</strong> "+f.css("width")+"<br />");j.push("<strong>opacity:</strong> "+f.css("opacity")+"<br />");j.push("<strong>height:</strong> "+f.css("height")+"<br />");j.push("<strong>z-index:</strong> "+f.css("z-index")+"<br />");j.push("<strong>font-size:</strong> "+f.css("font-size")+"<br />");j.push("<strong>scale:</strong> "+f.data("roundabout").currentScale);j.push("</div>");f.html(j.join(""))}f.trigger("reposition");n.apply(o);return a.isInFocus.apply(o,[k.degrees])},setBearing:function(e,f){f=f||function(){};e=a.normalize.apply(null,[e]);this.each(function(){var m,g,k,j=b(this),l=j.data("roundabout"),h=l.bearing;l.bearing=e;j.trigger("bearingSet");a.updateChildren.apply(j);m=Math.abs(h-e);if(!l.animating||m>180){return}m=Math.abs(h-e);j.children(l.childSelector).each(function(o){var n;if(a.isChildBackDegreesBetween.apply(b(this),[e,h])){n=(h>e)?"Clockwise":"Counterclockwise";b(this).trigger("move"+n+"ThroughBack")}})});f.apply(this);return this},adjustBearing:function(f,e){e=e||function(){};if(f===0){return this}this.each(function(){a.setBearing.apply(b(this),[b(this).data("roundabout").bearing+f])});e.apply(this);return this},setTilt:function(e,f){f=f||function(){};this.each(function(){b(this).data("roundabout").tilt=e;a.updateChildren.apply(b(this))});f.apply(this);return this},adjustTilt:function(f,e){e=e||function(){};this.each(function(){a.setTilt.apply(b(this),[b(this).data("roundabout").tilt+f])});e.apply(this);return this},animateToBearing:function(f,g,k,h,j){var e=(new Date()).getTime();j=j||function(){};if(b.isFunction(h)){j=h;h=null}else{if(b.isFunction(k)){j=k;k=null}else{if(b.isFunction(g)){j=g;g=null}}}this.each(function(){var r,q,l,m=b(this),p=m.data("roundabout"),n=(!g)?p.duration:g,o=(k)?k:p.easing||"swing";if(!h){h={timerStart:e,start:p.bearing,totalTime:n}}r=e-h.timerStart;if(p.stopAnimation){a.allowAnimation.apply(m);p.animating=false;return}if(r<n){if(!p.animating){m.trigger("animationStart")}p.animating=true;if(typeof b.easing.def==="string"){q=b.easing[o]||b.easing[b.easing.def];l=q(null,r,h.start,f-h.start,h.totalTime)}else{l=b.easing[o]((r/h.totalTime),r,h.start,f-h.start,h.totalTime)}if(a.compareVersions.apply(null,[b().jquery,"1.7.2"])>=0&&!(b.easing.easeOutBack)){l=h.start+((f-h.start)*l)}l=a.normalize.apply(null,[l]);p.dragBearing=l;a.setBearing.apply(m,[l,function(){setTimeout(function(){a.animateToBearing.apply(m,[f,n,o,h,j])},0)}])}else{p.lastAnimationStep=true;f=a.normalize.apply(null,[f]);a.setBearing.apply(m,[f,function(){m.trigger("animationEnd")}]);p.animating=false;p.lastAnimationStep=false;p.dragBearing=f;j.apply(m)}});return this},animateToNearbyChild:function(e,g){var f=e[0],j=e[1],h=e[2]||function(){};if(b.isFunction(j)){h=j;j=null}else{if(b.isFunction(f)){h=f;f=null}}return this.each(function(){var n,l,k=b(this),p=k.data("roundabout"),m=(!p.reflect)?p.bearing%360:p.bearing,o=k.children(p.childSelector).length;if(!p.animating){if((p.reflect&&g==="previous")||(!p.reflect&&g==="next")){m=(Math.abs(m)<p.floatComparisonThreshold)?360:m;for(n=0;n<o;n+=1){l={lower:(p.period*n),upper:(p.period*(n+1))};l.upper=(n===o-1)?360:l.upper;if(m<=Math.ceil(l.upper)&&m>=Math.floor(l.lower)){if(o===2&&m===360){a.animateToDelta.apply(k,[-180,f,j,h])}else{a.animateBearingToFocus.apply(k,[l.lower,f,j,h])}break}}}else{m=(Math.abs(m)<p.floatComparisonThreshold||360-Math.abs(m)<p.floatComparisonThreshold)?0:m;for(n=o-1;n>=0;n-=1){l={lower:p.period*n,upper:p.period*(n+1)};l.upper=(n===o-1)?360:l.upper;if(m>=Math.floor(l.lower)&&m<Math.ceil(l.upper)){if(o===2&&m===360){a.animateToDelta.apply(k,[180,f,j,h])}else{a.animateBearingToFocus.apply(k,[l.upper,f,j,h])}break}}}}})},animateToNearestChild:function(e,g,f){f=f||function(){};if(b.isFunction(g)){f=g;g=null}else{if(b.isFunction(e)){f=e;e=null}}return this.each(function(){var h=a.getNearestChild.apply(b(this));a.animateToChild.apply(b(this),[h,e,g,f])})},animateToChild:function(e,f,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(f)){g=f;f=null}}return this.each(function(){var l,j=b(this),k=j.data("roundabout");if(k.childInFocus!==e&&!k.animating){l=j.children(k.childSelector).eq(e);a.animateBearingToFocus.apply(j,[l.data("roundabout").degrees,f,h,g])}})},animateToNextChild:function(e,g,f){return a.animateToNearbyChild.apply(this,[arguments,"next"])},animateToPreviousChild:function(e,g,f){return a.animateToNearbyChild.apply(this,[arguments,"previous"])},animateToDelta:function(f,e,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(e)){g=e;e=null}}return this.each(function(){var j=b(this).data("roundabout").bearing+f;a.animateToBearing.apply(b(this),[j,e,h,g])})},animateBearingToFocus:function(f,e,h,g){g=g||function(){};if(b.isFunction(h)){g=h;h=null}else{if(b.isFunction(e)){g=e;e=null}}return this.each(function(){var j=b(this).data("roundabout").bearing-f;j=(Math.abs(360-j)<Math.abs(j))?360-j:-j;j=(j>180)?-(360-j):j;if(j!==0){a.animateToDelta.apply(b(this),[j,e,h,g])}})},stopAnimation:function(){return this.each(function(){b(this).data("roundabout").stopAnimation=true})},allowAnimation:function(){return this.each(function(){b(this).data("roundabout").stopAnimation=false})},startAutoplay:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");e=e||g.autoplayCallback||function(){};clearInterval(g.autoplayInterval);g.autoplayInterval=setInterval(function(){a.animateToNextChild.apply(f,[e])},g.autoplayDuration);g.autoplayIsRunning=true;f.trigger("autoplayStart")})},stopAutoplay:function(e){return this.each(function(){clearInterval(b(this).data("roundabout").autoplayInterval);b(this).data("roundabout").autoplayInterval=null;b(this).data("roundabout").autoplayIsRunning=false;if(!e){b(this).unbind(".autoplay")}b(this).trigger("autoplayStop")})},toggleAutoplay:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");e=e||g.autoplayCallback||function(){};if(!a.isAutoplaying.apply(b(this))){a.startAutoplay.apply(b(this),[e])}else{a.stopAutoplay.apply(b(this),[e])}})},isAutoplaying:function(){return(this.data("roundabout").autoplayIsRunning)},changeAutoplayDuration:function(e){return this.each(function(){var f=b(this),g=f.data("roundabout");g.autoplayDuration=e;if(a.isAutoplaying.apply(f)){a.stopAutoplay.apply(f);setTimeout(function(){a.startAutoplay.apply(f)},10)}})},normalize:function(f){var e=f%360;return(e<0)?360+e:e},normalizeRad:function(e){while(e<0){e+=(Math.PI*2)}while(e>(Math.PI*2)){e-=(Math.PI*2)}return e},isChildBackDegreesBetween:function(f,e){var g=b(this).data("roundabout").backDegrees;if(f>e){return(g>=e&&g<f)}else{return(g<e&&g>=f)}},getAnimateToMethod:function(e){e=e.toLowerCase();if(e==="next"){return"animateToNextChild"}else{if(e==="previous"){return"animateToPreviousChild"}}return"animateToNearestChild"},relayoutChildren:function(){return this.each(function(){var e=b(this),f=b.extend({},e.data("roundabout"));f.startingChild=e.data("roundabout").childInFocus;a.init.apply(e,[f,null,true])})},getNearestChild:function(){var e=b(this),g=e.data("roundabout"),f=e.children(g.childSelector).length;if(!g.reflect){return((f)-(Math.round(g.bearing/g.period)%f))%f}else{return(Math.round(g.bearing/g.period)%f)}},degToRad:function(e){return a.normalize.apply(null,[e])*Math.PI/180},getPlacement:function(f){var e=this.data("roundabout");return(!e.reflect)?360-(e.period*f):e.period*f},isInFocus:function(j){var h,e=this,g=e.data("roundabout"),f=a.normalize.apply(null,[g.bearing]);j=a.normalize.apply(null,[j]);h=Math.abs(f-j);return(h<=g.floatComparisonThreshold||h>=360-g.floatComparisonThreshold)},getChildInFocus:function(){var e=b(this).data("roundabout");return(e.childInFocus>-1)?e.childInFocus:false},compareVersions:function(e,k){var g,j=e.split(/\./i),h=k.split(/\./i),f=(j.length>h.length)?j.length:h.length;for(g=0;g<=f;g++){if(j[g]&&!h[g]&&parseInt(j[g],10)!==0){return 1}else{if(h[g]&&!j[g]&&parseInt(h[g],10)!==0){return -1}else{if(j[g]===h[g]){continue}}}if(j[g]&&h[g]){if(parseInt(j[g],10)>parseInt(h[g],10)){return 1}else{return -1}}}return 0}};b.fn.roundabout=function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||b.isFunction(e)||!e){return a.init.apply(this,arguments)}else{b.error("Method "+e+" does not exist for jQuery.roundabout.")}}}})(jQuery);